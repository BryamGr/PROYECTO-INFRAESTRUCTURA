<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Sistema de acceso para empleados de Envasados Industriales"/>
  <title>Acceso - Envasados Industriales</title>

  <!-- Tipografías & Iconos -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

  <!-- Estilos -->
  <link rel="stylesheet" href="style.css"/>

  <!-- Config inyectada por CI/Ansible -->
  <script>
    // Reemplazar "__API_BASE__" por el invoke URL del API Gateway (terraform output -raw api_invoke_url)
    window.API_BASE = "__API_BASE__";
    // Dónde ir tras login exitoso (tu dashboard en CloudFront)
    window.POST_LOGIN_REDIRECT = "/";
  </script>
</head>
<body>
  <div class="background-container">
    <div class="company-branding">
      <div class="logo"><i class="fas fa-boxes"></i></div>
      <h1>Productos Envasados</h1>
      <p>Calidad y precisión en cada producto</p>
    </div>

    <div class="login-container">
      <div class="login-header">
        <h2 id="viewTitle">Iniciar Sesión</h2>
        <p id="viewSubtitle">Ingresa tus credenciales para acceder al sistema</p>
      </div>

      <!-- ===== LOGIN ===== -->
      <form id="loginForm" novalidate>
        <div class="input-group">
          <label for="dni">DNI</label>
          <div class="input-wrapper">
            <i class="fas fa-id-card icon"></i>
            <input type="text" id="dni" placeholder="Ingresa tu DNI" required minlength="8" maxlength="20" />
            <span class="input-status"></span>
          </div>
          <span class="error-message" id="dniError"></span>
        </div>

        <div class="input-group">
          <label for="password">Contraseña</label>
          <div class="input-wrapper">
            <i class="fas fa-lock icon"></i>
            <input type="password" id="password" placeholder="Ingresa tu contraseña" required minlength="6"/>
            <span class="toggle-password" id="togglePassword">
              <i class="far fa-eye"></i>
            </span>
            <span class="input-status"></span>
          </div>
          <span class="error-message" id="passwordError"></span>
        </div>

        <div class="options">
          <label class="checkbox-container">
            <input type="checkbox" id="remember"/>
            <span class="checkmark"></span>
            Recordar mis datos
          </label>
          <a href="#" class="forgot" id="goToRegister">¿No tienes cuenta? Regístrate</a>
        </div>

        <button type="submit" class="btn" id="loginBtn">
          <span class="btn-text">ACCEDER</span>
          <div class="btn-loader"><div class="spinner"></div></div>
        </button>

        <div class="signup-text">
          <span id="loginMessage"></span>
        </div>
      </form>

      <!-- ===== REGISTRO ===== -->
      <form id="registerForm" novalidate style="display:none;">
        <div class="input-group">
          <label for="reg_nombre">Nombre</label>
          <div class="input-wrapper">
            <i class="fas fa-user icon"></i>
            <input type="text" id="reg_nombre" placeholder="Nombre" required/>
          </div>
        </div>

        <div class="input-group">
          <label for="reg_apellido">Apellido Paterno</label>
          <div class="input-wrapper">
            <i class="fas fa-user-tag icon"></i>
            <input type="text" id="reg_apellido" placeholder="Apellido paterno" required/>
          </div>
        </div>

        <div class="input-group">
          <label for="reg_dni">DNI</label>
          <div class="input-wrapper">
            <i class="fas fa-id-card icon"></i>
            <input type="text" id="reg_dni" placeholder="DNI" required minlength="8" maxlength="20"/>
          </div>
        </div>

        <div class="input-group">
          <label for="reg_edad">Edad</label>
          <div class="input-wrapper">
            <i class="fas fa-calendar-day icon"></i>
            <input type="number" id="reg_edad" placeholder="Edad (>=18)" required min="18"/>
          </div>
        </div>

        <div class="input-group">
          <label for="reg_password">Contraseña</label>
          <div class="input-wrapper">
            <i class="fas fa-lock icon"></i>
            <input type="password" id="reg_password" placeholder="Mínimo 6 caracteres" required minlength="6"/>
            <span class="toggle-password" data-target="reg_password">
              <i class="far fa-eye"></i>
            </span>
          </div>
        </div>

        <div class="input-group">
          <label for="reg_password2">Confirmar contraseña</label>
          <div class="input-wrapper">
            <i class="fas fa-lock icon"></i>
            <input type="password" id="reg_password2" placeholder="Repite la contraseña" required minlength="6"/>
            <span class="toggle-password" data-target="reg_password2">
              <i class="far fa-eye"></i>
            </span>
          </div>
          <span class="error-message" id="regError"></span>
        </div>

        <div class="options">
          <a href="#" class="forgot" id="goToLogin">¿Ya tienes cuenta? Inicia sesión</a>
        </div>

        <button type="submit" class="btn" id="registerBtn">
          <span class="btn-text">CREAR CUENTA</span>
          <div class="btn-loader"><div class="spinner"></div></div>
        </button>

        <div class="signup-text">
          <span id="registerMessage"></span>
        </div>
      </form>
    </div>
  </div>

  <!-- JS de la página -->
  <script src="script.js"></script>
</body>
</html>

